<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simulare Motoare Electrice</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: #eee;
    margin: 20px;
  }
  h2 {
    margin-bottom: 10px;
    border-bottom: 2px solid #555;
    padding-bottom: 5px;
  }
  .motor-section {
    background: #333;
    border-radius: 8px;
    padding: 15px 20px;
    margin-bottom: 30px;
    max-width: 600px;
    box-shadow: 0 0 15px #444;
  }
  .controls {
    display: flex;
    gap: 25px;
    margin-bottom: 15px;
    flex-wrap: wrap;
  }
  .control-group {
    flex: 1 1 140px;
  }
  label {
    display: block;
    font-weight: bold;
    margin-bottom: 6px;
  }
  input[type=range] {
    width: 100%;
  }
  .value-display {
    margin-top: 3px;
    font-size: 0.9em;
    color: #aaf;
  }
  canvas {
    width: 100%;
    height: 200px;
    background: #111;
    border-radius: 6px;
    box-shadow: inset 0 0 10px #000;
    display: block;
  }
</style>
</head>
<body>

<div class="motor-section" id="dcMotorSection">
  <h2>Motor cu Colector (DC Motor)</h2>
  <div class="controls">
    <div class="control-group">
      <label for="dcVoltage">Tensiune (Voltage)</label>
      <input type="range" id="dcVoltage" min="0" max="24" step="0.1" value="12" />
      <div class="value-display" id="dcVoltageVal">12 V</div>
    </div>
    <div class="control-group">
      <label for="dcSpeed">Viteză (Speed)</label>
      <input type="range" id="dcSpeed" min="0" max="1500" step="10" value="800" />
      <div class="value-display" id="dcSpeedVal">800 rpm</div>
    </div>
    <div class="control-group">
      <label for="dcLoad">Sarcină (Load)</label>
      <input type="range" id="dcLoad" min="0" max="100" step="1" value="50" />
      <div class="value-display" id="dcLoadVal">50%</div>
    </div>
  </div>
  <canvas id="dcCanvas"></canvas>
</div>

<div class="motor-section" id="syncMotorSection">
  <h2>Motor Sincron (Synchronous Motor)</h2>
  <div class="controls">
    <div class="control-group">
      <label for="syncVoltage">Tensiune (Voltage)</label>
      <input type="range" id="syncVoltage" min="0" max="24" step="0.1" value="12" />
      <div class="value-display" id="syncVoltageVal">12 V</div>
    </div>
    <div class="control-group">
      <label for="syncSpeed">Viteză (Speed)</label>
      <input type="range" id="syncSpeed" min="0" max="1500" step="10" value="1000" />
      <div class="value-display" id="syncSpeedVal">1000 rpm</div>
    </div>
    <div class="control-group">
      <label for="syncLoad">Sarcină (Load)</label>
      <input type="range" id="syncLoad" min="0" max="100" step="1" value="30" />
      <div class="value-display" id="syncLoadVal">30%</div>
    </div>
  </div>
  <canvas id="syncCanvas"></canvas>
</div>

<div class="motor-section" id="asyncMotorSection">
  <h2>Motor Asincron (Asynchronous Motor)</h2>
  <div class="controls">
    <div class="control-group">
      <label for="asyncVoltage">Tensiune (Voltage)</label>
      <input type="range" id="asyncVoltage" min="0" max="24" step="0.1" value="12" />
      <div class="value-display" id="asyncVoltageVal">12 V</div>
    </div>
    <div class="control-group">
      <label for="asyncSlip">Alunecare (Slip)</label>
      <input type="range" id="asyncSlip" min="0" max="10" step="0.1" value="1" />
      <div class="value-display" id="asyncSlipVal">1.0</div>
    </div>
    <div class="control-group">
      <label for="asyncLoad">Sarcină (Load)</label>
      <input type="range" id="asyncLoad" min="0" max="100" step="1" value="40" />
      <div class="value-display" id="asyncLoadVal">40%</div>
    </div>
  </div>
  <canvas id="asyncCanvas"></canvas>
</div>

<script>
// Funcție comună desenare rotor (cerc portocaliu care se rotește)
function drawRotor(ctx, cx, cy, radius, angle) {
  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate(angle);
  ctx.fillStyle = '#ff7f00';
  ctx.beginPath();
  ctx.arc(0, 0, radius, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = '#cc6600';
  ctx.fillRect(-radius / 2, -5, radius, 10);
  ctx.restore();
}

// Funcție desenare undă sinusoidală pentru motor DC
function drawSineWave(ctx, width, height, time, amplitude, frequency) {
  ctx.beginPath();
  ctx.strokeStyle = '#7fcfff';
  ctx.lineWidth = 3;
  ctx.moveTo(0, height / 2);
  for(let x = 0; x < width; x++) {
    let y = height / 2 + amplitude * Math.sin((x * frequency) + time);
    ctx.lineTo(x, y);
  }
  ctx.stroke();
}

// Motor cu colector
(function() {
  const voltageSlider = document.getElementById('dcVoltage');
  const speedSlider = document.getElementById('dcSpeed');
  const loadSlider = document.getElementById('dcLoad');
  const voltageVal = document.getElementById('dcVoltageVal');
  const speedVal = document.getElementById('dcSpeedVal');
  const loadVal = document.getElementById('dcLoadVal');
  const canvas = document.getElementById('dcCanvas');
  const ctx = canvas.getContext('2d');

  function resize() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  let voltage = +voltageSlider.value;
  let speed = +speedSlider.value;
  let load = +loadSlider.value;

  voltageVal.textContent = voltage + " V";
  speedVal.textContent = speed + " rpm";
  loadVal.textContent = load + " %";

  voltageSlider.oninput = () => {
    voltage = +voltageSlider.value;
    voltageVal.textContent = voltage + " V";
  };
  speedSlider.oninput = () => {
    speed = +speedSlider.value;
    speedVal.textContent = speed + " rpm";
  };
  loadSlider.oninput = () => {
    load = +loadSlider.value;
    loadVal.textContent = load + " %";
  };

  let time = 0;
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    let amplitude = voltage / 2;
    let frequency = speed / 1500;
    drawSineWave(ctx, canvas.width, canvas.height, time, amplitude, frequency * 10);
    // Un mic efect al sarcinii: unda devine mai "știrbită" la sarcini mari
    if(load > 70) {
      ctx.strokeStyle = 'rgba(255, 0, 0, 0.3)';
      ctx.lineWidth = 5;
      ctx.beginPath();
      for(let x = 0; x < canvas.width; x += 20) {
        ctx.moveTo(x, canvas.height/2 - amplitude/2);
        ctx.lineTo(x + 10, canvas.height/2 + amplitude/2);
      }
      ctx.stroke();
      ctx.lineWidth = 3;
      ctx.strokeStyle = '#7fcfff';
    }
    time += 0.1;
    requestAnimationFrame(animate);
  }
  animate();
})();

// Motor Sincron
(function() {
  const voltageSlider = document.getElementById('syncVoltage');
  const speedSlider = document.getElementById('syncSpeed');
  const loadSlider = document.getElementById('syncLoad');
  const voltageVal = document.getElementById('syncVoltageVal');
  const speedVal = document.getElementById('syncSpeedVal');
  const loadVal = document.getElementById('syncLoadVal');
  const canvas = document.getElementById('syncCanvas');
  const ctx = canvas.getContext('2d');

  function resize() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  let voltage = +voltageSlider.value;
  let speed = +speedSlider.value;
  let load = +loadSlider.value;

  voltageVal.textContent = voltage + " V";
  speedVal.textContent = speed + " rpm";
  loadVal.textContent = load + " %";

  voltageSlider.oninput = () => {
    voltage = +voltageSlider.value;
    voltageVal.textContent = voltage + " V";
  };
  speedSlider.oninput = () => {
    speed = +speedSlider.value;
    speedVal.textContent = speed + " rpm";
  };
  loadSlider.oninput = () => {
    load = +loadSlider.value;
    loadVal.textContent = load + " %";
  };

  let angle = 0;
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Viteză afectată de sarcină: sarcina mare încetinește rotorul
    let speedFactor = (speed / 1500) * (1 - load / 100);
    angle += 0.05 * speedFactor;
    drawRotor(ctx, canvas.width/2, canvas.height/2, 40, angle);
    requestAnimationFrame(animate);
  }
  animate();
})();

// Motor Asincron
(function() {
  const voltageSlider = document.getElementById('asyncVoltage');
  const slipSlider = document.getElementById('asyncSlip');
  const loadSlider = document.getElementById('asyncLoad');
  const voltageVal = document.getElementById('asyncVoltageVal');
  const slipVal = document.getElementById('asyncSlipVal');
  const loadVal = document.getElementById('asyncLoadVal');
  const canvas = document.getElementById('asyncCanvas');
  const ctx = canvas.getContext('2d');

  function resize() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  let voltage = +voltageSlider.value;
  let slip = +slipSlider.value;
  let load = +loadSlider.value;

  voltageVal.textContent = voltage + " V";
  slipVal.textContent = slip.toFixed(1);
  loadVal.textContent = load + " %";

  voltageSlider.oninput = () => {
    voltage = +voltageSlider.value;
    voltageVal.textContent = voltage + " V";
  };
  slipSlider.oninput = () => {
    slip = +slipSlider.value;
    slipVal.textContent = slip.toFixed(1);
  };
  loadSlider.oninput = () => {
    load = +loadSlider.value;
    loadVal.textContent = load + " %";
  };

  let angle = 0;
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // viteza invers proportionala cu alunecarea si scade la sarcina mare
    let speedFactor = (voltage / (slip + 1)) * (1 - load / 100);
    angle += 0.05 * speedFactor * 0.01;
    drawRotor(ctx, canvas.width/2, canvas.height/2, 40, angle);
    requestAnimationFrame(animate);
  }
  animate();
})();
</script>

</body>
</html>
